library(tidyverse)
crss <- read_csv("/home/data/original/dftwo0408.csv")
crss1 <- crss %>%
group_split(LGT, WEATHER2)
```
library(tidyverse)
library(tidyverse)
library(tidyverse)
install.packages("tidyverse")
library(tidyverse)
install.packages("tidyverse")
library(tidyverse)
library(askpass)
install.packages("tidyverse")
library(tidyverse)
crss <- read_csv("/home/data/original/dftwo0408.csv")
library(tidyverse)
crss <- read_csv("/home/data/original/dftwo0408.csv")
crss1 <- crss %>%
group_split(LGT, WEATHER2)
library(tidyverse)
crss <- read_csv("/home/data/original/dftwo0408.csv")
crss1 <- crss %>%
group_split(LGT, WEATHER2)
crss1
install.packages(mvord)
install.packages(mvord)
install.packages("/home/data/original/mvord_1.1.1.tar.gz", repos = NULL, type = "source")
library(tidyverse)
crss <- read_csv("/home/data/original/dftwo0408.csv")
crss1 <- crss %>%
group_split(LGT, WEATHER2)
crss1
library(mvord)
results = vector("list", length(crss1))
names(results) = names(crss1)
for (i in seq_along(crss1)){
results[i] = mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[i][[1]])
}
results
results = vector("list", length(crss1))
names(results) = names(crss1)
for (i in seq_along(crss1)){
results[i] = mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[i][[1]])
}
results
results = vector("list", length(crss1))
nrow(crss1)
crss1
seq_along(crss1)
pb <- txtProgressBar(style=3)
star_time <- Sys.time() ## 记录程序开始时间
library(mvord)
pb <- txtProgressBar(style=3)
star_time <- Sys.time() ## 记录程序开始时间
results = vector("list", length(crss1))
names(results) = names(crss1)
for (i in seq_along(crss1)){
## 第二个位置：实时反映进度
setTxtProgressBar(pb, i/seq_along(crss1))
results[i] = mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[i][[1]])
}
end_time <- Sys.time()  ## 记录程序结束时间
## 第三个位置关闭进度条
close(pb)
run_time <- end_time - star_time  ## 计算程序运行时间
results
library(mvord)
pb <- txtProgressBar(style=3)
star_time <- Sys.time() ## 记录程序开始时间
results = vector("list", length(crss1))
names(results) = names(crss1)
for (i in seq_along(crss1)){
## 第二个位置：实时反映进度
setTxtProgressBar(pb, i/seq_along(crss1))
results[i] = mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[i][[1]])
}
end_time <- Sys.time()  ## 记录程序结束时间
## 第三个位置关闭进度条
close(pb)
run_time <- end_time - star_time  ## 计算程序运行时间
results
pb <- txtProgressBar(style=3)
star_time <- Sys.time() ## 记录程序开始时间
results = vector("list", length(crss1))
names(results) = names(crss1)
for (i in seq_along(crss1)){
## 第二个位置：实时反映进度
setTxtProgressBar(pb, i/seq_along(crss1))
results[i] = mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[i][[1]])
}
end_time <- Sys.time()  ## 记录程序结束时间
## 第三个位置关闭进度条
close(pb)
run_time <- end_time - star_time  ## 计算程序运行时间
results
for (i in seq_along(crss1)){
## 第二个位置：实时反映进度
setTxtProgressBar(pb, i/seq_along(crss1))
results[i] = mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[i][[1]])
}
library(mvord)
pb <- txtProgressBar(style=3)
star_time <- Sys.time() ## 记录程序开始时间
results = vector("list", length(crss1))
names(results) = names(crss1)
for (i in seq_along(crss1)){
results[i] = mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[i][[1]])
## 第二个位置：实时反映进度
setTxtProgressBar(pb, i/seq_along(crss1))
}
end_time <- Sys.time()  ## 记录程序结束时间
## 第三个位置关闭进度条
close(pb)
run_time <- end_time - star_time  ## 计算程序运行时间
results
pb <- txtProgressBar(style=3)
star_time <- Sys.time() ## 记录程序开始时间
results = vector("list", length(crss1))
names(results) = names(crss1)
for (i in seq_along(crss1)){
results[i] = mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[i][[1]])
## 第二个位置：实时反映进度
setTxtProgressBar(pb, i/seq_along(crss1))
}
end_time <- Sys.time()  ## 记录程序结束时间
## 第三个位置关闭进度条
close(pb)
run_time <- end_time - star_time  ## 计算程序运行时间
library(mvord)
pb <- txtProgressBar(style=3)
star_time <- Sys.time() ## 记录程序开始时间
results = vector("list", length(crss1))
names(results) = names(crss1)
for (i in seq_along(crss1)){
results[i] <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[i][[1]])
## 第二个位置：实时反映进度
setTxtProgressBar(pb, i/seq_along(crss1))
}
end_time <- Sys.time()  ## 记录程序结束时间
## 第三个位置关闭进度条
close(pb)
run_time <- end_time - star_time  ## 计算程序运行时间
results
ls
library(mvord)
pb <- txtProgressBar(style=3)
star_time <- Sys.time() ## 记录程序开始时间
results = vector("list", length(crss1))
names(results) = names(crss1)
for (i in seq_along(crss1)){
results[i] <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[i][[1]])
## 第二个位置：实时反映进度
setTxtProgressBar(pb, i/seq_along(crss1))
}
fit1 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[5][[1]])
pb <- txtProgressBar(style=3)
fit1 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[5][[1]])
setTxtProgressBar(pb, i/seq_along(crss1))
pb <- txtProgressBar(style=3)
fit1 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + AGE1.2 + DRINKING.2,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[5][[1]])
setTxtProgressBar(pb, i/seq_along(crss1))
pb <- txtProgressBar(style=3)
fit1 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + AGE1.2 + DRINKING.2,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[5][[1]])
setTxtProgressBar(pb)
ls
pb <- txtProgressBar(style=3)
fit1 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + AGE1.2 + DRINKING.2,threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[5][[1]])
setTxtProgressBar(pb)
summary(fit1)
fit1 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + AGE1.2 + DRINKING.2,threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[5][[1]])
fit1 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2) ~ 0 + AGE1.1+ DRINKING.1 + AGE1.2 + DRINKING.2,threshold.constraints = c(1,2),
link = mvprobit(),data = crss1[5][[1]])
fit1 <- mvord(formula = MMO2(INJ_SEV.1, INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + AGE1.2 + DRINKING.2,threshold.constraints = c(1,2),
link = mvprobit(),data = crss1[5][[1]])
summary(fit1)
fit2 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1, INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + AGE1.2 + DRINKING.2,threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[5][[1]])
summary(fit2)
fit3 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1, INJ_SEV.2) ~ 0 +AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[5][[1]])
fit3 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1, INJ_SEV.2) ~ 0 +AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[5][[1]])
library(mvord)
fit3 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1, INJ_SEV.2) ~ 0 +AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[5][[1]])
summary(fit3)
pb <- txtProgressBar(style=3)
star_time <- Sys.time() ## 记录程序开始时间
results = vector("list", length(crss1))
names(results) = names(crss1)
for (i in seq_along(crss1)){
results[i] <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[i][[1]])
## 第二个位置：实时反映进度
setTxtProgressBar(pb, i/seq_along(crss1))
}
end_time <- Sys.time()  ## 记录程序结束时间
## 第三个位置关闭进度条
close(pb)
run_time <- end_time - star_time  ## 计算程序运行时间
results
results = vector("list", length(crss1))
names(results) = names(crss1)
for (i in seq_along(crss1)){
results[[i]] <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[i][[1]])
## 第二个位置：实时反映进度
setTxtProgressBar(pb, i/seq_along(crss1))
}
end_time <- Sys.time()  ## 记录程序结束时间
## 第三个位置关闭进度条
close(pb)
run_time <- end_time - star_time  ## 计算程序运行时间
results
results
crss1
crss
mv1 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvlogit(),data = crss1[1][[1]])
mv2 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvlogit(),data = crss1[2][[1]])
mv3 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvlogit(),data = crss1[3][[1]])
mv4 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvlogit(),data = crss1[4][[1]])
mv5 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvlogit(),data = crss1[5][[1]])
mv6 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvlogit(),data = crss1[6][[1]])
mvall <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvlogit(),data = crss)
mv5 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[5][[1]])
class(crss1[1][[1]])
crss1[1][[1]]
crss1[1][[1]]$AGE1.1
class(crss1[1][[1]]$AGE1.1)
for (i in seq_along(crss1)){
crss1[i][[1]] %>%
dplyr::mutate(
across(c(AGE1.1,AGE1.2, MANCOLL, INJ_SEV.1, INJ_SEV.2), as.factor),
across(c(INJ_SEV.1, INJ_SEV.2), ~ fct_inseq(., ordered = TRUE)))}
for (i in seq_along(crss1)){
dplyr::mutate(crss1[i][[1]],
across(c(AGE1.1,AGE1.2, MANCOLL, INJ_SEV.1, INJ_SEV.2), as.factor),
across(c(INJ_SEV.1, INJ_SEV.2), ~ fct_inseq(., ordered = TRUE)))}
crss1[1][[1]] %>%
dplyr::mutate(
across(c(AGE1.1,AGE1.2, MANCOLL, INJ_SEV.1, INJ_SEV.2), as.factor),
across(c(INJ_SEV.1, INJ_SEV.2), ~ fct_inseq(., ordered = TRUE)))
library(tidyverse)
crss1[1][[1]] %>%
dplyr::mutate(
across(c(AGE1.1,AGE1.2, MANCOLL, INJ_SEV.1, INJ_SEV.2), as.factor),
across(c(INJ_SEV.1, INJ_SEV.2), ~ fct_inseq(., ordered = TRUE)))
for (i in seq_along(crss1)){
crss1[i][[1]] %>%
dplyr::mutate(
across(c(AGE1.1,AGE1.2, MANCOLL, INJ_SEV.1, INJ_SEV.2), as.factor),
across(c(INJ_SEV.1, INJ_SEV.2), ~ fct_inseq(., ordered = TRUE)))
}
class(crss1[2][[1]]$INJ_SEV.1)
for (i in seq_along(crss1)){
crss1[i][[1]] = crss1[i][[1]] %>%
dplyr::mutate(
across(c(AGE1.1,AGE1.2, MANCOLL, INJ_SEV.1, INJ_SEV.2), as.factor),
across(c(INJ_SEV.1, INJ_SEV.2), ~ fct_inseq(., ordered = TRUE)))
}
dim(crss1[6][[1]])
crss %>%
dplyr::mutate(
across(c(AGE1.1,AGE1.2, MANCOLL, INJ_SEV.1, INJ_SEV.2), as.factor),
across(c(INJ_SEV.1, INJ_SEV.2), ~ fct_inseq(., ordered = TRUE))
)
crss1 <- crss %>%
dplyr::mutate(
across(c(AGE1.1,AGE1.2, MANCOLL, INJ_SEV.1, INJ_SEV.2), as.factor),
across(c(INJ_SEV.1, INJ_SEV.2), ~ fct_inseq(., ordered = TRUE))
)
class(crss1[2][[1]]$INJ_SEV.1)
crss1[2][[1]]
crss1
crss1 <- crss %>%
dplyr::mutate(
across(c(AGE1.1,AGE1.2, MANCOLL, INJ_SEV.1, INJ_SEV.2), as.factor),
across(c(INJ_SEV.1, INJ_SEV.2), ~ fct_inseq(., ordered = TRUE))
)
class(crss1)
crss1$CASENUM
class(crss1$INJ_SEV.1)
class(crss1$MANCOLL)
crss1 <- crss %>%
dplyr::mutate(
across(c(AGE1.1,AGE1.2, MANCOLL, INJ_SEV.1, INJ_SEV.2, DRINKING.1, DRINKING.2, DRUGS.1, DRUGS.2,
AIR_BAG.1, AIR_BAG.2, EJECRION.1, EJECTION.2, ROLLOVER.1, ROLLOVER.2), as.factor),
across(c(INJ_SEV.1, INJ_SEV.2), ~ fct_inseq(., ordered = TRUE))
)
crss1 <- crss %>%
dplyr::mutate(
across(c(AGE1.1,AGE1.2, MANCOLL, INJ_SEV.1, INJ_SEV.2, DRINKING.1, DRINKING.2, DRUGS.1, DRUGS.2,
AIR_BAG.1, AIR_BAG.2, EJECTION.1, EJECTION.2, ROLLOVER.1, ROLLOVER.2), as.factor),
across(c(INJ_SEV.1, INJ_SEV.2), ~ fct_inseq(., ordered = TRUE))
)
crss1 <- crss %>%
dplyr::mutate(
across(c(AGE1.1,AGE1.2, MANCOLL, INJ_SEV.1, INJ_SEV.2, DRINKING.1, DRINKING.2, DRUGS.1, DRUGS.2,
AIR_BAG.1, AIR_BAG.2, EJECTION.1, EJECTION.2, ROLLOVER.1, ROLLOVER.2), as.factor),
across(c(INJ_SEV.1, INJ_SEV.2), ~ fct_inseq(., ordered = TRUE))
) %>%
group_split(LGT, WEATHER2)
class(crss1[2][[1]]$INJ_SEV.1)
mv5 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[5][[1]])
mv6 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[6][[1]])
mv5 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1  + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[5][[1]])
summary(mv5)
mv6 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + EJECTION.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2+ EJECTION.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[6][[1]])
mv1 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1  + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvlogit(),data = crss1[1][[1]])
mv2 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1  + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvlogit(),data = crss1[2][[1]])
mv3 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1  + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvlogit(),data = crss1[3][[1]])
mv4 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvlogit(),data = crss1[4][[1]])
mv3 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1  + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvlogit(),data = crss1[3][[1]])
mv4 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvlogit(),data = crss1[4][[1]])
mv3 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1  + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvlogit(),data = crss1[3][[1]])
mv4 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvlogit(),data = crss1[4][[1]])
\\\\\
getwd()
summary(mv6)
summary(mv3)
summary(mv5)
mv6 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1 + DRUGS.1 +AIR_BAG.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+  DRUGS.2  + AIR_BAG.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[6][[1]])
table(crss$WEATHER2)
dim(crss)
sum(is.na(crss))
colnames(crss)
table(crss$TYP_INT.1)
table(crss$DRUGS.1)
table(crss$DRUGS.2)
table(crss$DRINKING.1)
table(crss$AIR_BAG.1)
table(crss$EJECTION.1)
table(crss$ROLLOVER.1)
table(crss$REST_USE.1)
table(crss$REST_USE.2)
crss1 <- crss %>%
dplyr::mutate(
across(c(AGE1.1,AGE1.2, MANCOLL, INJ_SEV.1, INJ_SEV.2, DRINKING.1, DRINKING.2,
AIR_BAG.1, AIR_BAG.2, ROLLOVER.1, ROLLOVER.2, REST_USE.1, REST_USE.2), as.factor),
across(c(INJ_SEV.1, INJ_SEV.2), ~ fct_inseq(., ordered = TRUE))) %>%
drop_na() %>%
group_split(LGT, WEATHER2)
table(crss$MANCOLL)
mv6 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1  +AIR_BAG.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+ AIR_BAG.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,2,3,4),
link = mvprobit(),data = crss1[6][[1]])
unlink('doc/fars_cache', recursive = TRUE)
summary(mv6)
summary(mv5)
mv51 <- mvord(formula = MMO2(REST_USE.1, REST_USE.2, INJ_SEV.1,INJ_SEV.2) ~ 0 + AGE1.1+ DRINKING.1  +AIR_BAG.1 + ROLLOVER.1 + AGE1.2 + DRINKING.2+ AIR_BAG.2 + ROLLOVER.2 + MANCOLL,
threshold.constraints = c(1,1,2,2),
coef.constraints = c(1,1,2,2),
link = mvprobit(),data = crss1[5][[1]])
